# Changelog

所有重要的版本变更都会记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [1.1.0] - 2025-01-11

### 新增

#### @ 人物快速选择
- 输入 `@` 触发人物选择弹窗
- 支持模糊搜索过滤（如 `@李` 只显示包含"李"的人物）
- 人物自动从文档的 `人物：` 行提取
- 选择人物后自动添加冒号 `：`
- 上下键选择，Enter/Tab 确认，Esc 取消

#### Option/Alt+Tab 修饰符选择
- 输入人物名后按 `Option+Tab`（Mac）或 `Alt+Tab`（Windows）弹出修饰符选择菜单
- 支持选项：
  - `：`（直接台词）- 默认选中
  - `（OS）：`（旁白）
  - `（VO）：`（内心独白）
  - `（）：`（自定义情绪）
- 选择自定义情绪时可输入任意情绪词
- 如果光标在冒号后，会替换冒号为选择的修饰符

#### 自定义快捷键
- 修饰符选择快捷键可在设置中自定义
- 支持组合键：Alt/Ctrl/Shift + 任意按键
- 默认：`Alt+Tab`

#### 完整写作流程示例
```
方式一：@ 选人物（自动加冒号）
1. 输入 @ → 选择"李明" → 插入"李明："
2. 直接输入台词内容

方式二：@ 选人物 + 修饰符
1. 输入 @ → 选择"李明" → 插入"李明："
2. 按 Option+Tab → 选择"（OS）：" → 变成"李明（OS）："
3. 输入台词内容

方式三：手动输入人物名 + 修饰符
1. 输入"李明"
2. 按 Option+Tab → 选择修饰符
```

---

## [1.0.0] - 2025-01-11

### 新增

#### 核心功能
- **剧本项目管理**：支持多个剧本项目，通过文件夹路径管理
- **剧本文件标识**：使用 `type: screenplay` frontmatter 标记剧本文件
- **侧边面板**：右侧功能面板，包含写作和项目两个标签页

#### 写作辅助
- **插入场景**：自动编号的场景头（格式：`X-X 日/夜 内/外 地点`）
- **人物行**：场景头后自动添加 `人物：` 行
- **光标定位**：插入场景后光标自动选中「地点」便于修改
- **新建一集**：插入新一集标题和首个场景
- **插入闪回**：一键插入完整闪回（含 `【闪回】` 和 `【闪回结束】` 标记）
- **结束闪回**：单独插入 `【闪回结束】` 标记
- **动作描述**：快速插入 △ 符号
- **旁白格式**：支持 `（OS）` 旁白和 `（VO）` 内心独白格式

#### 统计功能
- **字数统计**：实时显示总字数和每集字数
- **人物统计**：统计每个角色的台词数量和出场集数
- **出场详情**：展开查看角色每句台词，点击可跳转到对应行
- **排除功能**：可排除误识别的非人物项

#### 导出功能
- **Word 导出**：导出为格式化的 .docx 文件
- **格式保留**：保留场景头、台词、动作描述等格式
- **自定义格式**：可在设置中自定义导出字体和字号
  - 集标题：字体、字号、加粗、居中
  - 场景头：字体、字号、加粗
  - 正文/台词：字体、字号
  - 角色名：字体、字号、加粗
  - 动作描述：字体、字号

#### 编辑器增强
- **场景头验证**：实时高亮显示格式错误的场景头
- **角色选择弹窗**：输入 `/` 触发角色选择（可在设置中关闭）

#### 快捷键支持
- 插入场景
- 新建一集
- 插入闪回
- 结束闪回
- 插入动作描述 △
- 插入旁白（OS）
- 插入内心独白（VO）

### 默认格式设置

| 元素 | 字体 | 字号 | 其他 |
|------|------|------|------|
| 集标题 | 黑体 (SimHei) | 16pt | 加粗、居中 |
| 场景头 | 黑体 (SimHei) | 12pt | 加粗 |
| 正文/台词 | 宋体 (SimSun) | 12pt | - |
| 角色名 | 宋体 (SimSun) | 12pt | 加粗 |
| 动作描述 | 楷体 (KaiTi) | 12pt | - |

---

## 开发计划

### 即将推出
- [ ] PDF 导出功能
- [ ] 分场表导出
- [ ] AI 辅助写作（故事梗概、人物设定生成）
- [ ] 项目设定管理（人物、大纲）
- [ ] 场景重新编号功能

### 长期计划
- [ ] 多语言支持
- [ ] 剧本模板
- [ ] 协作功能
- [ ] 版本历史
